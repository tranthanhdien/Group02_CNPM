<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LOGIN FACEBOOK</title>
</head>
<body>
	<script>
		//[1] Load lên các thành phần cần thiết
		window.fbAsyncInit = function() {
			FB.init({
				appId : '401733703942139',
				cookie : true,
				xfbml : true,
				version : 'v2.5'
			});
			// Kiểm tra trạng thái hiện tại
			FB.getLoginStatus(function(response) {
				statusChangeCallback(response);
			});

		};
		//[2] Xử lý trạng thái đăng nhập
		function statusChangeCallback(response) {
			// Người dùng đã đăng nhập FB và đã đăng nhập vào ứng dụng
			if (response.status === 'connected') {
				ShowWelcome();
			}
			// Người dùng đã đăng nhập FB nhưng chưa đăng nhập ứng dụng
			else if (response.status === 'not_authorized') {
				ShowLoginButton();
			}
			// Người dùng chưa đăng nhập FB
			else {
				ShowLoginButton();
			}
		}
		// [3] Yêu cầu đăng nhập FB
		function RequestLoginFB() {
			window.location = 'http://graph.facebook.com/oauth/authorize?client_id=401733703942139&scope=public_profile,email,user_likes&redirect_uri=http://localhost:8080/NMCNPM_NĐCSong_2019/LoginFB.html';
		}
		 // [4] Hiển thị nút đăng nhập
        function ShowLoginButton() {
            document.getElementById('btb').setAttribute('style', 'display:block');
            document.getElementById('lbl').setAttribute('style', 'display:none');
        }
        // [5] Chào mừng người dùng đã đăng nhập
        function ShowWelcome() {
            document.getElementById('btb').setAttribute('style', 'display:none');            
            FB.api('/me', function (response) {
                var name = response.name;
                var username = response.username;
                var id = response.id;
                document.getElementById('lbl').innerHTML = 'Tên=' + name + ' | username=' + username + ' | id=' + id;
                document.getElementById('lbl').setAttribute('style', 'display:block');
            });
        }
	</script>

	<div id="fb-root"></div>
	<script async defer crossorigin="anonymous"
		src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v3.2&appId=401733703942139&autoLogAppEvents=1"></script>


	</br>
	<!-- NÚT ĐĂNG NHẬP -->
	<input id="btb" type="button" value="ĐĂNG NHẬP"
		onclick="RequestLoginFB()" style="display: none" />
	<p id="lbl" style="display: none">BẠN ĐÃ ĐĂNG NHẬP THÀNH CÔNG!</p>
	<br />


	<!-- Hiển thị nút Like -->
	<div class="fb-like" data-href="https://www.facebook.com/MTP.Fan/"
		data-layout="box_count" data-action="like" data-size="small"
		data-show-faces="true" data-share="true"></div>

	</br>
	<!-- Hiển thị page -->
	<div class="fb-page" data-href="https://www.facebook.com/MTP.Fan/"
		data-tabs="timeline" data-width="500" data-height="70"
		data-small-header="true" data-adapt-container-width="true"
		data-hide-cover="false" data-show-facepile="true">
		<blockquote cite="https://www.facebook.com/facebook"
			class="fb-xfbml-parse-ignore">
			<a href="https://www.facebook.com/facebook">Facebook</a>
		</blockquote>
	</div>
	</br>
	<!-- Hiển thị coment -->
	<div class="fb-comments"
		data-href="https://www.facebook.com/MTP.Fan/" data-numposts="5"></div>
</body>
</html>